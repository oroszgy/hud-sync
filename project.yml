title: "NerKor-UD-Sync"
description: >
  This project syncs PoS/Morph. annotation across corpora annotated with UD-like schema.


# These are the directories that the project needs. The project CLI will make
# sure that they always exist.
directories: [ "data", "data/raw", "data/interim", "data/processed" ]

env:
  API_KEY: DBHUB_KEY

assets:
#   Universal dependencies
  - dest: data/raw/UD
    git:
      repo: https://github.com/UniversalDependencies/UD_Hungarian-Szeged
      branch: r2.10
      path: ""

  # NerKor
  - dest: data/raw/NerKor
    git:
      repo: https://github.com/nytud/NYTK-NerKor
      branch: main
      path: data

workflows:
  all:
    - diff

commands:
  - name: diff
    help: "Compares different UD annotated corpora"
    script:
      - python -m ud_sync diff data/raw/UD data/raw/NerKor data/interim/diff.db
    deps:
      - data/raw/UD
      - data/raw/NerKor
    outputs:
      - data/interim/diff.db

  - name: publish
    help: "Upload diff db"
    script:
      - curl -F apikey=${env.API_KEY} -F dbname=hud_diff.sqlite https://api.dbhub.io/v1/delete
      - curl -F apikey=${env.API_KEY} -F dbname=hud_diff.sqlite -F file=@./data/interim/diff.db  -F force=true
        -F public=true https://api.dbhub.io/v1/upload

